
# Copyright (c) 2013-2015, EPFL/Blue Brain Project
#                     Raphael Dumusc <raphael.dumusc@epfl.ch>

include_directories(${CMAKE_CURRENT_SOURCE_DIR})

set(DCCORE_LINK_LIBRARIES
  PUBLIC
    Deflect
    dcwebservice
    Qt5::Core
    Qt5::Qml
    Qt5::Quick
    Qt5::Widgets
    ${Boost_LIBRARIES}
    ${MPI_CXX_LIBRARIES}
    zeq
    ZeroBuf
  PRIVATE
    Qt5::OpenGL
    Qt5::Svg
    Qt5::Quick
    Qt5::WebKitWidgets
    Qt5::Xml
    Qt5::XmlPatterns
    ${OPENGL_LIBRARIES}
    ${FFMPEG_LIBRARIES}
)

if(ENABLE_PDF_SUPPORT)
  list(APPEND DCCORE_PUBLIC_HEADERS
    PDFTiler.h
  )
  list(APPEND DCCORE_MOC_PUBLIC_HEADERS
    PDFContent.h
    PDFSynchronizer.h
  )
  list(APPEND DCCORE_SOURCES
    PDF.cpp
    PDFContent.cpp
    PDFSynchronizer.cpp
    PDFTiler.cpp
    PDFInteractionDelegate.cpp
    thumbnail/PDFThumbnailGenerator.cpp
  )
  list(APPEND DCCORE_LINK_LIBRARIES PRIVATE ${POPPLER_LIBRARIES})
endif()

list(APPEND DCCORE_PUBLIC_HEADERS
  types.h
  CachedDataSource.h
  ContentFactory.h
  ContentLoader.h
  ContentType.h
  DataSource.h
  DynamicTexture.h
  DisplayGroupController.h
  DynamicTextureContent.h
  ElapsedTimer.h
  FFMPEGFrame.h
  FFMPEGMovie.h
  FFMPEGPicture.h
  FFMPEGVideoFrameConverter.h
  FFMPEGVideoStream.h
  FileCommandHandler.h
  FpsCounter.h
  LayoutEngine.h
  Image.h
  log.h
  LodTiler.h
  LodTools.h
  MovieSynchronizer.h
  MovieUpdater.h
  MPIChannel.h
  MPIContext.h
  MPINospin.h
  PixelStreamContent.h
  qmlUtils.h
  QtImage.h
  QuadLineNode.h
  SessionCommandHandler.h
  State.h
  StatePreview.h
  StateSerializationHelper.h
  StreamImage.h
  SVGImage.h
  SVGTextureFactory.h
  SVGTiler.h
  TestPattern.h
  TextureContent.h
  TextureNode.h
  VisibilityHelper.h
  ZoomInteractionDelegate.h
  ZoomHelper.h
  configuration/Configuration.h
  configuration/MasterConfiguration.h
  configuration/WallConfiguration.h
  localstreamer/CommandLineOptions.h
  localstreamer/DockToolbar.h
  localstreamer/PixelStreamerFactory.h
  localstreamer/PixelStreamerType.h
  thumbnail/DefaultThumbnailGenerator.h
  thumbnail/FolderThumbnailGenerator.h
  thumbnail/ImageThumbnailGenerator.h
  thumbnail/MovieThumbnailGenerator.h
  thumbnail/PyramidThumbnailGenerator.h
  thumbnail/StateThumbnailGenerator.h
  thumbnail/ThumbnailGenerator.h
  thumbnail/ThumbnailGeneratorFactory.h
  ws/AsciiToQtKeyCodeMapper.h
  ws/DisplayGroupAdapter.h
)

list(APPEND DCCORE_MOC_PUBLIC_HEADERS
  BasicSynchronizer.h
  Content.h
  ContentAction.h
  ContentActionsModel.h
  ContentInteractionDelegate.h
  ContentSynchronizer.h
  ContentWindow.h
  ContentWindowController.h
  Coordinates.h
  DataProvider.h
  DisplayGroup.h
  DisplayGroupRenderer.h
  DynamicTextureSynchronizer.h
  ImageSynchronizer.h
  LodSynchronizer.h
  Markers.h
  MasterFromWallChannel.h
  MasterToForkerChannel.h
  MasterToWallChannel.h
  MovieContent.h
  MultitouchArea.h
  Options.h
  PixelStreamInteractionDelegate.h
  PixelStreamSynchronizer.h
  PixelStreamUpdater.h
  PixelStreamWindowManager.h
  QuickRenderer.h
  QmlControlPanel.h
  QmlWindowRenderer.h
  RenderController.h
  SVGContent.h
  SVGSynchronizer.h
  TextureUploader.h
  Tile.h
  TiledSynchronizer.h
  VectorialContent.h
  WallFromMasterChannel.h
  WallWindow.h
  WallToMasterChannel.h
  WallToWallChannel.h
  WebbrowserCommandHandler.h
  localstreamer/AsyncImageLoader.h
  localstreamer/DockPixelStreamer.h
  localstreamer/PixelStreamer.h
  localstreamer/PixelStreamerLauncher.h
  localstreamer/Pictureflow.h
  localstreamer/WebkitAuthenticationHelper.h
  localstreamer/WebkitHtmlSelectReplacer.h
  localstreamer/WebkitPixelStreamer.h
  ws/TextInputDispatcher.h
  ws/TextInputHandler.h
  ws/WebServiceServer.h
)

list(APPEND DCCORE_SOURCES
  BasicSynchronizer.cpp
  CachedDataSource.cpp
  Content.cpp
  ContentAction.cpp
  ContentActionsModel.cpp
  ContentFactory.cpp
  ContentLoader.cpp
  ContentType.cpp
  ContentInteractionDelegate.cpp
  ContentSynchronizer.cpp
  ContentWindow.cpp
  ContentWindowController.cpp
  Coordinates.cpp
  DataProvider.cpp
  DisplayGroup.cpp
  DisplayGroupController.cpp
  DisplayGroupRenderer.cpp
  DynamicTexture.cpp
  DynamicTextureContent.cpp
  DynamicTextureSynchronizer.cpp
  ElapsedTimer.cpp
  FFMPEGFrame.cpp
  FFMPEGMovie.cpp
  FFMPEGPicture.cpp
  FFMPEGVideoFrameConverter.cpp
  FFMPEGVideoStream.cpp
  FileCommandHandler.cpp
  FpsCounter.cpp
  LayoutEngine.cpp
  ImageSynchronizer.cpp
  log.cpp
  LodSynchronizer.cpp
  LodTiler.cpp
  LodTools.cpp
  Markers.cpp
  MasterFromWallChannel.cpp
  MasterToForkerChannel.cpp
  MasterToWallChannel.cpp
  MetaTypeRegistration.cpp
  MovieContent.cpp
  MovieSynchronizer.cpp
  MovieUpdater.cpp
  MPIChannel.cpp
  MPIContext.cpp
  MPINospin.cpp
  MultitouchArea.cpp
  Options.cpp
  PixelStreamContent.cpp
  PixelStreamInteractionDelegate.cpp
  PixelStreamSynchronizer.cpp
  PixelStreamUpdater.cpp
  PixelStreamWindowManager.cpp
  QuickRenderer.cpp
  QmlControlPanel.cpp
  QmlWindowRenderer.cpp
  QmlTypeRegistration.cpp
  QtImage.cpp
  QuadLineNode.cpp
  RenderController.cpp
  SessionCommandHandler.cpp
  State.cpp
  StatePreview.cpp
  StateSerializationHelper.cpp
  StreamImage.cpp
  SVGContent.cpp
  SVGImage.cpp
  SVGTextureFactory.cpp
  SVGTiler.cpp
  SVGSynchronizer.cpp
  TestPattern.cpp
  TextureContent.cpp
  TextureNode.cpp
  TextureUploader.cpp
  Tile.cpp
  TiledSynchronizer.cpp
  VectorialContent.cpp
  VisibilityHelper.cpp
  WallFromMasterChannel.cpp
  WallToMasterChannel.cpp
  WallToWallChannel.cpp
  WallWindow.cpp
  WebbrowserCommandHandler.cpp
  ZoomInteractionDelegate.cpp
  ZoomHelper.cpp
  configuration/Configuration.cpp
  configuration/MasterConfiguration.cpp
  configuration/WallConfiguration.cpp
  localstreamer/AsyncImageLoader.cpp
  localstreamer/CommandLineOptions.cpp
  localstreamer/DockPixelStreamer.cpp
  localstreamer/DockToolbar.cpp
  localstreamer/PixelStreamer.cpp
  localstreamer/PixelStreamerFactory.cpp
  localstreamer/PixelStreamerLauncher.cpp
  localstreamer/PixelStreamerType.cpp
  localstreamer/Pictureflow.cpp
  localstreamer/WebkitAuthenticationHelper.cpp
  localstreamer/WebkitHtmlSelectReplacer.cpp
  localstreamer/WebkitPixelStreamer.cpp
  thumbnail/DefaultThumbnailGenerator.cpp
  thumbnail/FolderThumbnailGenerator.cpp
  thumbnail/ImageThumbnailGenerator.cpp
  thumbnail/MovieThumbnailGenerator.cpp
  thumbnail/PyramidThumbnailGenerator.cpp
  thumbnail/StateThumbnailGenerator.cpp
  thumbnail/ThumbnailGenerator.cpp
  thumbnail/ThumbnailGeneratorFactory.cpp
  ws/AsciiToQtKeyCodeMapper.cpp
  ws/DisplayGroupAdapter.cpp
  ws/TextInputDispatcher.cpp
  ws/TextInputHandler.cpp
  ws/WebServiceServer.cpp
)

set(DCCORE_RESOURCES resources/core.qrc)

set(DCCORE_INCLUDE_NAME dc/core)
add_subdirectory(rest)
common_library(dccore)
